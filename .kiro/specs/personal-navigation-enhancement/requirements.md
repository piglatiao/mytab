# 个人导航页面增强项目 - 需求文档

## 简介

本项目旨在将现有的 `ai_studio_code (1).html` 中的优秀功能整合到 `index.html` 中，并进行全面优化，创建一个功能完善、美观易用的个人导航页面，最终部署到 Cloudflare Pages。

## 术语表

- **导航系统 (Navigation System)**: 整个个人导航网站应用
- **书签卡片 (Bookmark Card)**: 显示单个网站链接的可点击卡片组件
- **分类系统 (Category System)**: 用于组织和管理书签的分类功能
- **背景管理器 (Background Manager)**: 处理自定义背景图片和遮罩的功能模块
- **搜索引擎 (Search Engine)**: 集成的多引擎搜索功能
- **密码保护区 (Protected Area)**: 需要密码才能访问的敏感内容区域
- **励志语录 (Motivational Quote)**: 页面上显示的随机励志文字
- **图标获取器 (Icon Fetcher)**: 自动获取网站图标的功能
- **LocalStorage**: 浏览器本地存储，用于保存用户设置和数据

## 需求

### 需求 1: 页面布局优化

**用户故事**: 作为用户，我希望看到一个美观、现代化的导航页面，以便获得更好的视觉体验。

#### 验收标准

1. WHEN 用户访问导航页面时，THE 导航系统 SHALL 显示采用毛玻璃效果的现代化界面
2. WHEN 用户在不同设备上访问时，THE 导航系统 SHALL 自动适配屏幕尺寸并保持良好的可读性
3. WHEN 用户滚动页面时，THE 导航系统 SHALL 显示平滑的滚动动画效果
4. WHEN 页面加载完成时，THE 导航系统 SHALL 在 500 毫秒内显示所有核心内容
5. THE 导航系统 SHALL 使用 Inter 字体系列以提供清晰的文字显示

### 需求 2: 字体颜色优化

**用户故事**: 作为用户，我希望文字颜色清晰易读，以便在不同背景下都能轻松阅读内容。

#### 验收标准

1. WHEN 使用默认背景时，THE 导航系统 SHALL 使用白色 (rgba(255, 255, 255, 0.95)) 作为主要文字颜色
2. WHEN 使用自定义背景时，THE 导航系统 SHALL 根据背景亮度自动调整文字颜色以确保对比度至少为 4.5:1
3. WHEN 鼠标悬停在链接上时，THE 导航系统 SHALL 将文字颜色变为 #818CF8 (次要色)
4. WHEN 显示次要信息时，THE 导航系统 SHALL 使用 rgba(255, 255, 255, 0.7) 的半透明白色
5. THE 导航系统 SHALL 为所有文字添加微妙的阴影效果以提高可读性

### 需求 3: 自定义背景功能

**用户故事**: 作为用户，我希望能够自定义页面背景，以便个性化我的导航页面。

#### 验收标准

1. WHEN 用户点击设置按钮时，THE 背景管理器 SHALL 显示背景设置对话框
2. WHEN 用户输入图片 URL 并保存时，THE 背景管理器 SHALL 将图片设置为页面背景并保存到 LocalStorage
3. WHEN 用户上传本地图片时，THE 背景管理器 SHALL 将图片转换为 Base64 格式并应用
4. WHEN 用户调整遮罩浓度滑块时，THE 背景管理器 SHALL 实时更新背景遮罩的不透明度 (0-90%)
5. WHEN 用户点击"恢复默认"时，THE 背景管理器 SHALL 清除自定义背景并恢复默认渐变背景
6. THE 背景管理器 SHALL 支持 Cloudflare R2、Imgur 和任意直链图片

### 需求 4: 网站管理功能

**用户故事**: 作为用户，我希望能够添加、编辑和删除书签，以便管理我的常用网站。

#### 验收标准

1. WHEN 用户点击"添加网站"按钮时，THE 导航系统 SHALL 显示添加网站对话框
2. WHEN 用户输入网站标题和 URL 时，THE 导航系统 SHALL 验证 URL 格式的有效性
3. WHEN 用户未提供图标时，THE 图标获取器 SHALL 自动从 Google Favicon API 获取网站图标
4. WHEN 用户提供自定义图标 URL 时，THE 导航系统 SHALL 使用用户提供的图标
5. WHEN 用户长按书签卡片时，THE 导航系统 SHALL 显示编辑和删除选项
6. WHEN 用户删除书签时，THE 导航系统 SHALL 要求确认并从 LocalStorage 中移除数据
7. THE 导航系统 SHALL 将所有书签数据保存到 LocalStorage 以实现持久化

### 需求 5: 自动图标获取

**用户故事**: 作为用户，我希望系统能自动获取网站图标，以便节省手动设置的时间。

#### 验收标准

1. WHEN 用户添加新网站且未提供图标时，THE 图标获取器 SHALL 尝试从 `https://www.google.com/s2/favicons?domain={domain}&sz=64` 获取图标
2. WHEN Google API 获取失败时，THE 图标获取器 SHALL 尝试从 `{url}/favicon.ico` 获取图标
3. WHEN 所有获取方式失败时，THE 图标获取器 SHALL 使用 UI Avatars API 生成基于网站名称的字母图标
4. WHEN 图标加载失败时，THE 导航系统 SHALL 显示占位符图标而不是破损的图片
5. THE 图标获取器 SHALL 在 3 秒内完成图标获取或使用备用方案

### 需求 6: 励志语录功能

**用户故事**: 作为用户，我希望看到随机的励志语录，以便获得每日激励。

#### 验收标准

1. WHEN 页面加载时，THE 导航系统 SHALL 从预设的励志语录库中随机选择一条显示
2. WHEN 用户刷新页面时，THE 导航系统 SHALL 显示不同的励志语录
3. WHEN 用户点击语录区域时，THE 导航系统 SHALL 切换到下一条随机语录
4. THE 导航系统 SHALL 支持中英文双语励志语录
5. THE 导航系统 SHALL 每 24 小时自动更换一次励志语录
6. WHERE 用户启用语录功能时，THE 导航系统 SHALL 在页面顶部显示励志语录

### 需求 7: 多搜索引擎支持

**用户故事**: 作为用户，我希望能够使用多个搜索引擎，以便根据需求选择最合适的搜索工具。

#### 验收标准

1. THE 搜索引擎 SHALL 支持 Google、Bing 和 Baidu 三个搜索引擎
2. WHEN 用户点击搜索引擎标签时，THE 搜索引擎 SHALL 切换到对应的搜索引擎
3. WHEN 用户输入搜索关键词并按回车时，THE 搜索引擎 SHALL 在新标签页中打开搜索结果
4. WHEN 用户切换搜索引擎时，THE 搜索引擎 SHALL 更新搜索框的占位符文本
5. THE 搜索引擎 SHALL 记住用户上次选择的搜索引擎并在下次访问时自动选中

### 需求 8: 密码保护功能

**用户故事**: 作为用户，我希望能够保护敏感内容，以便只有知道密码的人才能访问。

#### 验收标准

1. WHEN 用户访问"学习资源"分类时，THE 密码保护区 SHALL 显示密码输入界面
2. WHEN 用户输入正确密码 (默认: 123456) 时，THE 密码保护区 SHALL 解锁并显示隐藏内容
3. WHEN 用户输入错误密码时，THE 密码保护区 SHALL 显示错误提示并清空输入框
4. WHEN 用户成功解锁后，THE 密码保护区 SHALL 在当前会话中保持解锁状态
5. WHEN 用户关闭浏览器后，THE 密码保护区 SHALL 重新锁定
6. THE 密码保护区 SHALL 使用 Base64 编码存储敏感 URL 以提供基本的隐私保护

### 需求 9: 分类管理

**用户故事**: 作为用户，我希望能够创建和管理书签分类，以便更好地组织我的网站。

#### 验收标准

1. WHEN 用户点击"添加分类"按钮时，THE 分类系统 SHALL 显示分类创建对话框
2. WHEN 用户输入分类名称时，THE 分类系统 SHALL 验证名称的唯一性
3. WHEN 用户创建新分类时，THE 分类系统 SHALL 在导航栏中添加新的分类标签
4. WHEN 用户拖拽书签到不同分类时，THE 分类系统 SHALL 更新书签的分类归属
5. WHEN 分类为空时，THE 分类系统 SHALL 隐藏该分类 (除了"学习资源"分类)
6. THE 分类系统 SHALL 在顶部导航栏显示每个分类的书签数量

### 需求 10: Cloudflare Pages 部署

**用户故事**: 作为用户，我希望能够将导航页面部署到 Cloudflare Pages，以便随时随地访问。

#### 验收标准

1. THE 导航系统 SHALL 使用单个 HTML 文件包含所有必要的 CSS 和 JavaScript
2. THE 导航系统 SHALL 使用 CDN 加载外部依赖 (Tailwind CSS, Alpine.js, Font Awesome)
3. WHEN 部署到 Cloudflare Pages 时，THE 导航系统 SHALL 在 2 秒内完成首次内容绘制
4. THE 导航系统 SHALL 支持 HTTPS 访问
5. THE 导航系统 SHALL 在全球范围内提供低延迟访问 (通过 Cloudflare CDN)

### 需求 11: 响应式设计

**用户故事**: 作为移动设备用户，我希望导航页面在手机和平板上也能正常使用，以便随时访问我的书签。

#### 验收标准

1. WHEN 屏幕宽度小于 768px 时，THE 导航系统 SHALL 切换到移动端布局
2. WHEN 在移动设备上时，THE 导航系统 SHALL 将侧边栏改为可折叠的抽屉式菜单
3. WHEN 在平板设备上时，THE 导航系统 SHALL 调整书签卡片的网格列数以适应屏幕
4. THE 导航系统 SHALL 在所有设备上保持至少 44x44 像素的可点击区域
5. THE 导航系统 SHALL 支持触摸手势 (滑动、长按等)

### 需求 12: 性能优化

**用户故事**: 作为用户，我希望页面加载快速流畅，以便获得良好的使用体验。

#### 验收标准

1. THE 导航系统 SHALL 在 1 秒内完成首次内容绘制 (FCP)
2. THE 导航系统 SHALL 使用懒加载技术加载书签图标
3. WHEN 书签数量超过 50 个时，THE 导航系统 SHALL 使用虚拟滚动技术
4. THE 导航系统 SHALL 将用户数据压缩后存储到 LocalStorage
5. THE 导航系统 SHALL 使用防抖技术优化搜索输入和滚动事件

### 需求 13: 数据导入导出

**用户故事**: 作为用户，我希望能够导出和导入我的书签数据，以便备份或迁移到其他设备。

#### 验收标准

1. WHEN 用户点击"导出数据"按钮时，THE 导航系统 SHALL 生成包含所有书签和设置的 JSON 文件
2. WHEN 用户选择导入文件时，THE 导航系统 SHALL 验证文件格式的有效性
3. WHEN 导入数据时，THE 导航系统 SHALL 询问用户是合并还是替换现有数据
4. THE 导航系统 SHALL 支持导出为 HTML 书签格式 (兼容浏览器导入)
5. THE 导航系统 SHALL 在导入前自动备份当前数据

### 需求 14: 键盘快捷键

**用户故事**: 作为高级用户，我希望能够使用键盘快捷键，以便更高效地操作导航页面。

#### 验收标准

1. WHEN 用户按下 "/" 键时，THE 导航系统 SHALL 聚焦到搜索框
2. WHEN 用户按下 "Ctrl+K" 或 "Cmd+K" 时，THE 导航系统 SHALL 打开快速搜索对话框
3. WHEN 用户按下 "Ctrl+," 或 "Cmd+," 时，THE 导航系统 SHALL 打开设置面板
4. WHEN 用户按下 "Esc" 键时，THE 导航系统 SHALL 关闭当前打开的对话框
5. WHEN 用户按下数字键 1-9 时，THE 导航系统 SHALL 跳转到对应的分类

### 需求 15: 主题切换

**用户故事**: 作为用户，我希望能够切换明暗主题，以便在不同环境下获得舒适的视觉体验。

#### 验收标准

1. WHEN 用户点击主题切换按钮时，THE 导航系统 SHALL 在明暗主题之间切换
2. WHEN 切换到暗色主题时，THE 导航系统 SHALL 使用深色背景和浅色文字
3. WHEN 切换到亮色主题时，THE 导航系统 SHALL 使用浅色背景和深色文字
4. THE 导航系统 SHALL 记住用户的主题偏好并在下次访问时自动应用
5. THE 导航系统 SHALL 遵循系统的明暗模式偏好作为默认设置

### 需求 16: 天气信息显示

**用户故事**: 作为用户，我希望看到当前的天气信息，以便了解今天的天气状况。

#### 验收标准

1. WHEN 页面加载时，THE 导航系统 SHALL 自动获取用户所在城市的天气信息
2. WHEN 用户允许位置权限时，THE 导航系统 SHALL 使用精确的地理位置获取天气
3. WHEN 用户拒绝位置权限时，THE 导航系统 SHALL 使用 IP 地址估算位置
4. THE 导航系统 SHALL 显示当前温度、天气状况、湿度和风力信息
5. THE 导航系统 SHALL 每 30 分钟自动更新一次天气数据
6. WHEN 天气数据获取失败时，THE 导航系统 SHALL 显示默认的天气信息

### 需求 17: 时钟和日期显示

**用户故事**: 作为用户，我希望看到实时的时间和日期，以便随时了解当前时间。

#### 验收标准

1. THE 导航系统 SHALL 显示 24 小时制的实时时钟
2. THE 导航系统 SHALL 显示完整的日期信息（年月日和星期）
3. THE 导航系统 SHALL 每秒更新一次时间显示
4. WHEN 用户点击时钟区域时，THE 导航系统 SHALL 在 12/24 小时制之间切换
5. THE 导航系统 SHALL 使用大号字体显示时间以提高可读性

### 需求 18: 待办事项功能

**用户故事**: 作为用户，我希望能够添加和管理待办事项，以便记录日常任务。

#### 验收标准

1. WHEN 用户点击"添加待办"按钮时，THE 导航系统 SHALL 显示待办事项输入框
2. WHEN 用户输入待办内容并按回车时，THE 导航系统 SHALL 创建新的待办事项
3. WHEN 用户点击待办事项时，THE 导航系统 SHALL 标记为已完成并添加删除线
4. WHEN 用户长按待办事项时，THE 导航系统 SHALL 显示编辑和删除选项
5. THE 导航系统 SHALL 将待办事项保存到 LocalStorage
6. THE 导航系统 SHALL 在侧边栏显示待办事项列表

### 需求 19: 快速笔记功能

**用户故事**: 作为用户，我希望能够快速记录想法和笔记，以便随时查看。

#### 验收标准

1. WHEN 用户点击"笔记"图标时，THE 导航系统 SHALL 打开笔记编辑器
2. WHEN 用户输入笔记内容时，THE 导航系统 SHALL 自动保存到 LocalStorage
3. THE 导航系统 SHALL 支持 Markdown 格式的笔记
4. THE 导航系统 SHALL 显示笔记的创建和修改时间
5. WHEN 用户创建多条笔记时，THE 导航系统 SHALL 以列表形式展示

### 需求 20: 网站访问统计

**用户故事**: 作为用户，我希望看到我的网站访问统计，以便了解我的浏览习惯。

#### 验收标准

1. WHEN 用户点击书签时，THE 导航系统 SHALL 记录访问次数
2. THE 导航系统 SHALL 在侧边栏显示"最常访问"的网站列表
3. THE 导航系统 SHALL 使用图表展示本周的搜索统计
4. THE 导航系统 SHALL 显示每个书签的访问次数徽章
5. WHEN 用户点击统计图表时，THE 导航系统 SHALL 显示详细的访问历史

### 需求 21: 书签拖拽排序

**用户故事**: 作为用户，我希望能够通过拖拽来调整书签顺序，以便按照我的偏好排列。

#### 验收标准

1. WHEN 用户长按书签卡片时，THE 导航系统 SHALL 进入拖拽模式
2. WHEN 用户拖拽书签时，THE 导航系统 SHALL 显示拖拽预览和目标位置指示器
3. WHEN 用户释放书签时，THE 导航系统 SHALL 更新书签位置并保存到 LocalStorage
4. THE 导航系统 SHALL 支持跨分类拖拽书签
5. THE 导航系统 SHALL 在拖拽过程中提供平滑的动画效果

### 需求 22: 搜索历史记录

**用户故事**: 作为用户，我希望能够查看我的搜索历史，以便快速重复之前的搜索。

#### 验收标准

1. WHEN 用户进行搜索时，THE 搜索引擎 SHALL 将搜索关键词保存到历史记录
2. WHEN 用户点击搜索框时，THE 搜索引擎 SHALL 显示最近的搜索历史
3. WHEN 用户点击历史记录项时，THE 搜索引擎 SHALL 自动填充搜索框
4. THE 搜索引擎 SHALL 最多保存 20 条搜索历史
5. WHEN 用户点击"清除历史"时，THE 搜索引擎 SHALL 删除所有搜索记录

### 需求 23: 网站分组和标签

**用户故事**: 作为用户，我希望能够为书签添加标签，以便更灵活地组织和查找网站。

#### 验收标准

1. WHEN 用户编辑书签时，THE 导航系统 SHALL 允许添加多个标签
2. WHEN 用户点击标签时，THE 导航系统 SHALL 筛选显示具有该标签的所有书签
3. THE 导航系统 SHALL 在侧边栏显示所有可用标签的列表
4. THE 导航系统 SHALL 为每个标签显示包含的书签数量
5. WHEN 用户搜索时，THE 导航系统 SHALL 同时搜索标签和书签标题

### 需求 24: 专注模式

**用户故事**: 作为用户，我希望有一个专注模式，以便在工作时减少干扰。

#### 验收标准

1. WHEN 用户启用专注模式时，THE 导航系统 SHALL 隐藏所有娱乐类网站
2. WHEN 专注模式激活时，THE 导航系统 SHALL 只显示工作和学习相关的书签
3. THE 导航系统 SHALL 允许用户自定义专注模式的书签白名单
4. WHEN 用户设置专注时长时，THE 导航系统 SHALL 在时间结束后自动退出专注模式
5. THE 导航系统 SHALL 在专注模式下显示倒计时计时器

### 需求 25: 多语言支持

**用户故事**: 作为国际用户，我希望能够切换界面语言，以便使用我熟悉的语言。

#### 验收标准

1. THE 导航系统 SHALL 支持中文（简体）、英文和日文三种语言
2. WHEN 用户切换语言时，THE 导航系统 SHALL 立即更新所有界面文本
3. THE 导航系统 SHALL 根据浏览器语言自动选择默认语言
4. THE 导航系统 SHALL 保存用户的语言偏好到 LocalStorage
5. THE 导航系统 SHALL 为励志语录提供对应语言的内容
